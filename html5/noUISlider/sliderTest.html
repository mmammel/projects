<html>
  <head>
    <link href="nouislider.css" rel="stylesheet">
  </head>
  <body>

    <div id="sliderContainer">
      <div id="myslider"></div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="nouislider.js"></script>
    <script type="text/javascript">

      function Cutoffs( hostId ) {
        this.hostEle = $('#' + hostId );
        this.hostEle.append( '<div id="'+hostId+'_inner"></div>' );
        this.slider = $('#' + hostId + '_inner' )[0];
        this.min = 0;
        this.max = 100;
        this.cuts = [];

        noUiSlider.create( this.slider, {
          start: [0],
          connect: false,
          orientation: 'horizontal',
          behaviour: 'drag',
          range: {
            'min' : this.min,
            'max' : this.max
          }
        });

        this.hostEle.on('click', function(e) {
          var n = (e.clientX / $(e.currentTarget).width() ) * ( theCutoffs.max - theCutoffs.min );
          theCutoffs.addCut( n );
        });
      };

      Cutoffs.prototype.softUpdate = function() {
        this.slider.noUiSlider.updateOptions({
          range: {
            'min' : this.min,
            'max' : this.max
          }
        });
      };

      Cutoffs.prototype.hardUpdate = function() {
        this.slider.noUiSlider.destroy();
        var connects = [];
        for( var i = 0; i < this.cuts.length + 1; i++ ) {
          connects.push( true );
        }

        noUiSlider.create( this.slider, {
          start: this.cuts,
          connect: connects,
          orientation: 'horizontal',
          behaviour: 'drag',
          range: {
            'min' : this.min,
            'max' : this.max
          }
        });
      };

      Cutoffs.prototype.setMin = function( n ) {
        this.min = n < this.max ? n : this.min;
        this.softUpdate();
      };

      Cutoffs.prototype.setMax = function( n ) {
        this.max = n > this.min ? n : this.max;
        this.softUpdate();
      };

      Cutoffs.prototype.addCut = function( n ) {
        var newCuts = [];
        var inserted = false;

        if( n > this.min && n < this.max ) {
          if( this.cuts.length === 0 ) {
            newCuts.push( n );
          } else {
            for( var i = 0; i < this.cuts.length; i++ ) {
              if( this.cuts[i] > n ) {
                newCuts.push(n);
                inserted = true;
              }
              newCuts.push( this.cuts[i] );
            }
            if( !inserted ) newCuts.push(n);
          }

          this.cuts = newCuts;
          this.hardUpdate();
        }
      }

      var theCutoffs;

      $(document).ready(function() {
        theCutoffs = new Cutoffs( 'sliderContainer' );
      });
    </script>
  </body>
</html>
