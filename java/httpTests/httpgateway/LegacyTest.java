import java.util.*;
import java.net.*;
import java.io.*;
import java.net.URLEncoder;

public class LegacyTest {

  public static void main( String [] args ) {

    String userText = "LISA|L|OSBORNE|83 INMAN ST. |BRIGHTON|WI|63214|(608) 776-1069|F|033-07-6644|DANIEL |K|SULLIVAN|333SUMMER ST|GERMANTOWN|IL|55433|(708) 446-2244|M|050-88-9090|FRANCIS|F|KALIL|26 GRANITE ST. |OMAHA|NE|83414|(814) 776-1244|M|233-68-7969|DOMINIC|T|NOEL|94 CLIFTON RD. |CANTEBURY |NH|04455|(603) 899-2885|M|347-77-4888|RPBON |E|NITKIN |LISA|L|OSBORNE|83 INMAN ST. |BRIGHTON|WI|63214|(608) 776-1069|F|033-07-6644|DANIEL |K|SULLIVAN|333SUMMER ST|GERMANTOWN|IL|55433|(708) 446-2244|M|050-88-9090|FRANCIS|F|KALIL|26 GRANITE ST. |OMAHA|NE|83414|(814) 776-1244|M|233-68-7969|DOMINIC|T|NOEL|94 CLIFTON RD. |CANTEBURY |NH|04455|(603) 899-2885|M|347-77-4888|RPBON |E|NITKIN |";
    String sourceText = "LISA|L|OSBORNE|83 INMAN ST.|BRIGHTON|WI|63214|(608) 776-1069|F|033-07-6644|DANIEL|K|SULLIVAN|333 SUMMER ST.|GERMANTOWN|IL|55433|(708) 446-2244|M|050-88-9090|FRANCIS|F|KALIL|26 GRANITE ST.|OMAHA|NE|83414|(814) 776-1244|M|233-68-7969|DOMINIC|T|NOEL|94 CLIFTON RD.|CANTEBURY|NH|04455|(603) 899-2885|M|343-77-4888|ROBIN|E|NITKIN|111 THORNDIKE BLVD.|FRANKLIN PARK|MA|02155|(617) 555-2815|F|040-55-6677|JOEL|Y|SINNOTT|875 HUNTINGTON AVE.|BROADVILLE|CA|90011|(408) 566-2844|M|244-66-7897|LINDA|K|ENGLANDER|508 BORDER ST.|ATLANTA|GA|30333|(404) 809-2815|F|899-26-7888|ALFRED|L|LYONS|48 PHILLIPS BLVD.|NEW YORK|NY|10015|(212) 677-8585|M|443-55-3322|DIANA|F|PARMENTER|551 COLUMBUS AVE.|WASHINGTON|DC|20005|(202) 655-9433|F|044-88-9019|RICHARD|L|VIERRA|24 EAST HURLEY ST.|CAMBRIDGE|MA|02139|(617) 661-8989|M|344-89-3218|LYNNE|A|HARLOW|101 N. WASHINGTON ST.|MANSFIELD|MA|02430|(508) 877-5086|F|040-11-8453|JACK|M|CUMMINS|12 EASTSIDE DR.|BLOOMINGTON|IN|47401|(812) 339-2339|M|566-38-3839|HENRY|C|COSTELLO|180 E. 10TH ST.|NEW YORK|NY|10003|(212) 506-1319|M|566-28-8549|DENISE|L|BAUTARA|1801 OCEANSIDE DR.|FT. LAUDERDALE|FL|34033|(706) 323-1157|F|030-57-7739|DEREK|M|RUTHERFORD|623 AUSTIN ST.|COLLEGE STATION|TX|70894|(818) 321-8850|M|784-38-2958|CLYDE|A|WILLMAN SR.|12 SADDLE CLUB RD.|FARGO|ND|87239|(619) 333-2319|M|347-73-6530|ELLIOT|T|BENNETT|15 WILDWOOD ST.|BOULDER|CO|80339|(707) 594-8749|M|543-32-4324|BASIA|N|BULGAR|145 TELEGRAPH RD|SAN FRANCISCO|CA|94139|(415) 549-9834|F|764-42-4802|CATHERINE|C|BURNS|12339 SANTA MONICA BLVD.|LOS ANGELES|CA|90339|(202) 989-7088|F|646-32-5086|AARON|K|RING|650 NINTH AVE. #4N|NEW YORK|NY|10019|(212) 677-5438|M|848-90-3753|ROBERT|K|WOLF|1280 SPRING ST.|PARAMUS|NJ|07029|(203) 571-2319|M|056-78-3145|JOSH|L|LAVINE|339 STATE ST.|PONTIAC|MI|41230|(610) 455-9438|M|834-79-8354|LAURA|K|PINO|212 S. MICHIGAN AVE.|CHICAGO|IL|60608|(312) 387-9098|F|793-44-3214|MICHAEL|M|SPIEGELMAN|15 STATE LINE RD.|KENOSHA|WI|69823|(414) 567-2331|M|040-83-8391|DAIN|C|ICHIKAWA|45 HOWARD ST.|ALBEQUERQUE|NM|89321|(408) 839-8392|M|483-29-4839|JOSHUA|L|CAMPBELL|66 WAINWRIGHT ST.|FT. WORTH|TX|88900|(770) 899-2805|M|888-99-9999|LISA|L|OSBORNE|83 INMAN ST.|BRIGHTON|WI|63214|(608) 776-1069|F|033-07-6644|DANIEL|K|SULLIVAN|333 SUMMER ST.|GERMANTOWN|IL|55433|(708) 446-2244|M|050-88-9090|FRANCIS|F|KALIL|26 GRANITE ST.|OMAHA|NE|83414|(814) 776-1244|M|233-68-7969|DOMINIC|T|NOEL|94 CLIFTON RD.|CANTEBURY|NH|04455|(603) 899-2885|M|343-77-4888|ROBIN|E|NITKIN|111 THORNDIKE BLVD.|FRANKLIN PARK|MA|02155|(617) 555-2815|F|040-55-6677|JOEL|Y|SINNOTT|875 HUNTINGTON AVE.|BROADVILLE|CA|90011|(408) 566-2844|M|244-66-7897|LINDA|K|ENGLANDER|508 BORDER ST.|ATLANTA|GA|30333|(404) 809-2815|F|899-26-7888|ALFRED|L|LYONS|48 PHILLIPS BLVD.|NEW YORK|NY|10015|(212) 677-8585|M|443-55-3322|DIANA|F|PARMENTER|551 COLUMBUS AVE.|WASHINGTON|DC|20005|(202) 655-9433|F|044-88-9019|RICHARD|L|VIERRA|24 EAST HURLEY ST.|CAMBRIDGE|MA|02139|(617) 661-8989|M|344-89-3218|LYNNE|A|HARLOW|101 N. WASHINGTON ST.|MANSFIELD|MA|02430|(508) 877-5086|F|040-11-8453|JACK|M|CUMMINS|12 EASTSIDE DR.|BLOOMINGTON|IN|47401|(812) 339-2339|M|566-38-3839|HENRY|C|COSTELLO|180 E. 10TH ST.|NEW YORK|NY|10003|(212) 506-1319|M|566-28-8549|DENISE|L|BAUTARA|1801 OCEANSIDE DR.|FT. LAUDERDALE|FL|34033|(706) 323-1157|F|030-57-7739|DEREK|M|RUTHERFORD|623 AUSTIN ST.|COLLEGE STATION|TX|70894|(818) 321-8850|M|784-38-2958|CLYDE|A|WILLMAN SR.|12 SADDLE CLUB RD.|FARGO|ND|87239|(619) 333-2319|M|347-73-6530|ELLIOT|T|BENNETT|15 WILDWOOD ST.|BOULDER|CO|80339|(707) 594-8749|M|543-32-4324|BASIA|N|BULGAR|145 TELEGRAPH RD|SAN FRANCISCO|CA|94139|(415) 549-9834|F|764-42-4802|CATHERINE|C|BURNS|12339 SANTA MONICA BLVD.|LOS ANGELES|CA|90339|(202) 989-7088|F|646-32-5086|AARON|K|RING|650 NINTH AVE. #4N|NEW YORK|NY|10019|(212) 677-5438|M|848-90-3753|ROBERT|K|WOLF|1280 SPRING ST.|PARAMUS|NJ|07029|(203) 571-2319|M|056-78-3145|JOSH|L|LAVINE|339 STATE ST.|PONTIAC|MI|41230|(610) 455-9438|M|834-79-8354|LAURA|K|PINO|212 S. MICHIGAN AVE.|CHICAGO|IL|60608|(312) 387-9098|F|793-44-3214|MICHAEL|M|SPIEGELMAN|15 STATE LINE RD.|KENOSHA|WI|69823|(414) 567-2331|M|040-83-8391|DAIN|C|ICHIKAWA|45 HOWARD ST.|ALBEQUERQUE|NM|89321|(408) 839-8392|M|483-29-4839|JOSHUA|L|CAMPBELL|66 WAINWRIGHT ST.|FT. WORTH|TX|88900|(770) 899-2805|M|888-99-9999|LISA|L|OSBORNE|83 INMAN ST.|BRIGHTON|WI|63214|(608) 776-1069|F|033-07-6644|DANIEL|K|SULLIVAN|333 SUMMER ST.|GERMANTOWN|IL|55433|(708) 446-2244|M|050-88-9090|FRANCIS|F|KALIL|26 GRANITE ST.|OMAHA|NE|83414|(814) 776-1244|M|233-68-7969|DOMINIC|T|NOEL|94 CLIFTON RD.|CANTEBURY|NH|04455|(603) 899-2885|M|343-77-4888|ROBIN|E|NITKIN|111 THORNDIKE BLVD.|FRANKLIN PARK|MA|02155|(617) 555-2815|F|040-55-6677|JOEL|Y|SINNOTT|875 HUNTINGTON AVE.|BROADVILLE|CA|90011|(408) 566-2844|M|244-66-7897|LINDA|K|ENGLANDER|508 BORDER ST.|ATLANTA|GA|30333|(404) 809-2815|F|899-26-7888|ALFRED|L|LYONS|48 PHILLIPS BLVD.|NEW YORK|NY|10015|(212) 677-8585|M|443-55-3322|DIANA|F|PARMENTER|551 COLUMBUS AVE.|WASHINGTON|DC|20005|(202) 655-9433|F|044-88-9019|RICHARD|L|VIERRA|24 EAST HURLEY ST.|CAMBRIDGE|MA|02139|(617) 661-8989|M|344-89-3218|LYNNE|A|HARLOW|101 N. WASHINGTON ST.|MANSFIELD|MA|02430|(508) 877-5086|F|040-11-8453|JACK|M|CUMMINS|12 EASTSIDE DR.|BLOOMINGTON|IN|47401|(812) 339-2339|M|566-38-3839|HENRY|C|COSTELLO|180 E. 10TH ST.|NEW YORK|NY|10003|(212) 506-1319|M|566-28-8549|DENISE|L|BAUTARA|1801 OCEANSIDE DR.|FT. LAUDERDALE|FL|34033|(706) 323-1157|F|030-57-7739|DEREK|M|RUTHERFORD|623 AUSTIN ST.|COLLEGE STATION|TX|70894|(818) 321-8850|M|784-38-2958|CLYDE|A|WILLMAN SR.|12 SADDLE CLUB RD.|FARGO|ND|87239|(619) 333-2319|M|347-73-6530|ELLIOT|T|BENNETT|15 WILDWOOD ST.|BOULDER|CO|80339|(707) 594-8749|M|543-32-4324|BASIA|N|BULGAR|145 TELEGRAPH RD|SAN FRANCISCO|CA|94139|(415) 549-9834|F|764-42-4802|CATHERINE|C|BURNS|12339 SANTA MONICA BLVD.|LOS ANGELES|CA|90339|(202) 989-7088|F|646-32-5086|AARON|K|RING|650 NINTH AVE. #4N|NEW YORK|NY|10019|(212) 677-5438|M|848-90-3753|ROBERT|K|WOLF|1280 SPRING ST.|PARAMUS|NJ|07029|(203) 571-2319|M|056-78-3145|JOSH|L|LAVINE|339 STATE ST.|PONTIAC|MI|41230|(610) 455-9438|M|834-79-8354|LAURA|K|PINO|212 S. MICHIGAN AVE.|CHICAGO|IL|60608|(312) 387-9098|F|793-44-3214|MICHAEL|M|SPIEGELMAN|15 STATE LINE RD.|KENOSHA|WI|69823|(414) 567-2331|M|040-83-8391|DAIN|C|ICHIKAWA|45 HOWARD ST.|ALBEQUERQUE|NM|89321|(408) 839-8392|M|483-29-4839|JOSHUA|L|CAMPBELL|66 WAINWRIGHT ST.|FT. WORTH|TX|88900|(770) 899-2805|M|888-99-9999|LISA|L|OSBORNE|83 INMAN ST.|BRIGHTON|WI|63214|(608) 776-1069|F|033-07-6644|DANIEL|K|SULLIVAN|333 SUMMER ST.|GERMANTOWN|IL|55433|(708) 446-2244|M|050-88-9090|FRANCIS|F|KALIL|26 GRANITE ST.|OMAHA|NE|83414|(814) 776-1244|M|233-68-7969|DOMINIC|T|NOEL|94 CLIFTON RD.|CANTEBURY|NH|04455|(603) 899-2885|M|343-77-4888|ROBIN|E|NITKIN|111 THORNDIKE BLVD.|FRANKLIN PARK|MA|02155|(617) 555-2815|F|040-55-6677|JOEL|Y|SINNOTT|875 HUNTINGTON AVE.|BROADVILLE|CA|90011|(408) 566-2844|M|244-66-7897|LINDA|K|ENGLANDER|508 BORDER ST.|ATLANTA|GA|30333|(404) 809-2815|F|899-26-7888|ALFRED|L|LYONS|48 PHILLIPS BLVD.|NEW YORK|NY|10015|(212) 677-8585|M|443-55-3322|DIANA|F|PARMENTER|551 COLUMBUS AVE.|WASHINGTON|DC|20005|(202) 655-9433|F|044-88-9019|RICHARD|L|VIERRA|24 EAST HURLEY ST.|CAMBRIDGE|MA|02139|(617) 661-8989|M|344-89-3218|LYNNE|A|HARLOW|101 N. WASHINGTON ST.|MANSFIELD|MA|02430|(508) 877-5086|F|040-11-8453|JACK|M|CUMMINS|12 EASTSIDE DR.|BLOOMINGTON|IN|47401|(812) 339-2339|M|566-38-3839|HENRY|C|COSTELLO|180 E. 10TH ST.|NEW YORK|NY|10003|(212) 506-1319|M|566-28-8549|DENISE|L|BAUTARA|1801 OCEANSIDE DR.|FT. LAUDERDALE|FL|34033|(706) 323-1157|F|030-57-7739|DEREK|M|RUTHERFORD|623 AUSTIN ST.|COLLEGE STATION|TX|70894|(818) 321-8850|M|784-38-2958|CLYDE|A|WILLMAN SR.|12 SADDLE CLUB RD.|FARGO|ND|87239|(619) 333-2319|M|347-73-6530|ELLIOT|T|BENNETT|15 WILDWOOD ST.|BOULDER|CO|80339|(707) 594-8749|M|543-32-4324|BASIA|N|BULGAR|145 TELEGRAPH RD|SAN FRANCISCO|CA|94139|(415) 549-9834|F|764-42-4802|CATHERINE|C|BURNS|12339 SANTA MONICA BLVD.|LOS ANGELES|CA|90339|(202) 989-7088|F|646-32-5086|AARON|K|RING|650 NINTH AVE. #4N|NEW YORK|NY|10019|(212) 677-5438|M|848-90-3753|ROBERT|K|WOLF|1280 SPRING ST.|PARAMUS|NJ|07029|(203) 571-2319|M|056-78-3145|JOSH|L|LAVINE|339 STATE ST.|PONTIAC|MI|41230|(610) 455-9438|M|834-79-8354|LAURA|K|PINO|212 S. MICHIGAN AVE.|CHICAGO|IL|60608|(312) 387-9098|F|793-44-3214|MICHAEL|M|SPIEGELMAN|15 STATE LINE RD.|KENOSHA|WI|69823|(414) 567-2331|M|040-83-8391|DAIN|C|ICHIKAWA|45 HOWARD ST.|ALBEQUERQUE|NM|89321|(408) 839-8392|M|483-29-4839|JOSHUA|L|CAMPBELL|66 WAINWRIGHT ST.|FT. WORTH|TX|88900|(770) 899-2805|M|888-99-9999|LISA|L|OSBORNE|83 INMAN ST.|BRIGHTON|WI|63214|(608) 776-1069|F|033-07-6644|DANIEL|K|SULLIVAN|333 SUMMER ST.|GERMANTOWN|IL|55433|(708) 446-2244|M|050-88-9090|FRANCIS|F|KALIL|26 GRANITE ST.|OMAHA|NE|83414|(814) 776-1244|M|233-68-7969|DOMINIC|T|NOEL|94 CLIFTON RD.|CANTEBURY|NH|04455|(603) 899-2885|M|343-77-4888|ROBIN|E|NITKIN|111 THORNDIKE BLVD.|FRANKLIN PARK|MA|02155|(617) 555-2815|F|040-55-6677|JOEL|Y|SINNOTT|875 HUNTINGTON AVE.|BROADVILLE|CA|90011|(408) 566-2844|M|244-66-7897|LINDA|K|ENGLANDER|508 BORDER ST.|ATLANTA|GA|30333|(404) 809-2815|F|899-26-7888|ALFRED|L|LYONS|48 PHILLIPS BLVD.|NEW YORK|NY|10015|(212) 677-8585|M|443-55-3322|DIANA|F|PARMENTER|551 COLUMBUS AVE.|WASHINGTON|DC|20005|(202) 655-9433|F|044-88-9019|RICHARD|L|VIERRA|24 EAST HURLEY ST.|CAMBRIDGE|MA|02139|(617) 661-8989|M|344-89-3218|LYNNE|A|HARLOW|101 N. WASHINGTON ST.|MANSFIELD|MA|02430|(508) 877-5086|F|040-11-8453|JACK|M|CUMMINS|12 EASTSIDE DR.|BLOOMINGTON|IN|47401|(812) 339-2339|M|566-38-3839|HENRY|C|COSTELLO|180 E. 10TH ST.|NEW YORK|NY|10003|(212) 506-1319|M|566-28-8549|DENISE|L|BAUTARA|1801 OCEANSIDE DR.|FT. LAUDERDALE|FL|34033|(706) 323-1157|F|030-57-7739|DEREK|M|RUTHERFORD|623 AUSTIN ST.|COLLEGE STATION|TX|70894|(818) 321-8850|M|784-38-2958|CLYDE|A|WILLMAN SR.|12 SADDLE CLUB RD.|FARGO|ND|87239|(619) 333-2319|M|347-73-6530|ELLIOT|T|BENNETT|15 WILDWOOD ST.|BOULDER|CO|80339|(707) 594-8749|M|543-32-4324|BASIA|N|BULGAR|145 TELEGRAPH RD|SAN FRANCISCO|CA|94139|(415) 549-9834|F|764-42-4802|CATHERINE|C|BURNS|12339 SANTA MONICA BLVD.|LOS ANGELES|CA|90339|(202) 989-7088|F|646-32-5086|AARON|K|RING|650 NINTH AVE. #4N|NEW YORK|NY|10019|(212) 677-5438|M|848-90-3753|ROBERT|K|WOLF|1280 SPRING ST.|PARAMUS|NJ|07029|(203) 571-2319|M|056-78-3145|JOSH|L|LAVINE|339 STATE ST.|PONTIAC|MI|41230|(610) 455-9438|M|834-79-8354|LAURA|K|PINO|212 S. MICHIGAN AVE.|CHICAGO|IL|60608|(312) 387-9098|F|793-44-3214|MICHAEL|M|SPIEGELMAN|15 STATE LINE RD.|KENOSHA|WI|69823|(414) 567-2331|M|040-83-8391|DAIN|C|ICHIKAWA|45 HOWARD ST.|ALBEQUERQUE|NM|89321|(408) 839-8392|M|483-29-4839|JOSHUA|L|CAMPBELL|66 WAINWRIGHT ST.|FT. WORTH|TX|88900|(770) 899-2805|M|888-99-9999|LISA|L|OSBORNE|83 INMAN ST.|BRIGHTON|WI|63214|(608) 776-1069|F|033-07-6644|DANIEL|K|SULLIVAN|333 SUMMER ST.|GERMANTOWN|IL|55433|(708) 446-2244|M|050-88-9090|FRANCIS|F|KALIL|26 GRANITE ST.|OMAHA|NE|83414|(814) 776-1244|M|233-68-7969|DOMINIC|T|NOEL|94 CLIFTON RD.|CANTEBURY|NH|04455|(603) 899-2885|M|343-77-4888|ROBIN|E|NITKIN|111 THORNDIKE BLVD.|FRANKLIN PARK|MA|02155|(617) 555-2815|F|040-55-6677|JOEL|Y|SINNOTT|875 HUNTINGTON AVE.|BROADVILLE|CA|90011|(408) 566-2844|M|244-66-7897|LINDA|K|ENGLANDER|508 BORDER ST.|ATLANTA|GA|30333|(404) 809-2815|F|899-26-7888|ALFRED|L|LYONS|48 PHILLIPS BLVD.|NEW YORK|NY|10015|(212) 677-8585|M|443-55-3322|DIANA|F|PARMENTER|551 COLUMBUS AVE.|WASHINGTON|DC|20005|(202) 655-9433|F|044-88-9019|RICHARD|L|VIERRA|24 EAST HURLEY ST.|CAMBRIDGE|MA|02139|(617) 661-8989|M|344-89-3218|LYNNE|A|HARLOW|101 N. WASHINGTON ST.|MANSFIELD|MA|02430|(508) 877-5086|F|040-11-8453|JACK|M|CUMMINS|12 EASTSIDE DR.|BLOOMINGTON|IN|47401|(812) 339-2339|M|566-38-3839|HENRY|C|COSTELLO|180 E. 10TH ST.|NEW YORK|NY|10003|(212) 506-1319|M|566-28-8549|DENISE|L|BAUTARA|1801 OCEANSIDE DR.|FT. LAUDERDALE|FL|34033|(706) 323-1157|F|030-57-7739|DEREK|M|RUTHERFORD|623 AUSTIN ST.|COLLEGE STATION|TX|70894|(818) 321-8850|M|784-38-2958|CLYDE|A|WILLMAN SR.|12 SADDLE CLUB RD.|FARGO|ND|87239|(619) 333-2319|M|347-73-6530|ELLIOT|T|BENNETT|15 WILDWOOD ST.|BOULDER|CO|80339|(707) 594-8749|M|543-32-4324|BASIA|N|BULGAR|145 TELEGRAPH RD|SAN FRANCISCO|CA|94139|(415) 549-9834|F|764-42-4802|CATHERINE|C|BURNS|12339 SANTA MONICA BLVD.|LOS ANGELES|CA|90339|(202) 989-7088|F|646-32-5086|AARON|K|RING|650 NINTH AVE. #4N|NEW YORK|NY|10019|(212) 677-5438|M|848-90-3753|ROBERT|K|WOLF|1280 SPRING ST.|PARAMUS|NJ|07029|(203) 571-2319|M|056-78-3145|JOSH|L|LAVINE|339 STATE ST.|PONTIAC|MI|41230|(610) 455-9438|M|834-79-8354|LAURA|K|PINO|212 S. MICHIGAN AVE.|CHICAGO|IL|60608|(312) 387-9098|F|793-44-3214|MICHAEL|M|SPIEGELMAN|15 STATE LINE RD.|KENOSHA|WI|69823|(414) 567-2331|M|040-83-8391|DAIN|C|ICHIKAWA|45 HOWARD ST.|ALBEQUERQUE|NM|89321|(408) 839-8392|M|483-29-4839|JOSHUA|L|CAMPBELL|66 WAINWRIGHT ST.|FT. WORTH|TX|88900|(770) 899-2805|M|888-99-9999|LISA|L|OSBORNE|83 INMAN ST.|BRIGHTON|WI|63214|(608) 776-1069|F|033-07-6644|DANIEL|K|SULLIVAN|333 SUMMER ST.|GERMANTOWN|IL|55433|(708) 446-2244|M|050-88-9090|FRANCIS|F|KALIL|26 GRANITE ST.|OMAHA|NE|83414|(814) 776-1244|M|233-68-7969|DOMINIC|T|NOEL|94 CLIFTON RD.|CANTEBURY|NH|04455|(603) 899-2885|M|343-77-4888|ROBIN|E|NITKIN|111 THORNDIKE BLVD.|FRANKLIN PARK|MA|02155|(617) 555-2815|F|040-55-6677|JOEL|Y|SINNOTT|875 HUNTINGTON AVE.|BROADVILLE|CA|90011|(408) 566-2844|M|244-66-7897|LINDA|K|ENGLANDER|508 BORDER ST.|ATLANTA|GA|30333|(404) 809-2815|F|899-26-7888|ALFRED|L|LYONS|48 PHILLIPS BLVD.|NEW YORK|NY|10015|(212) 677-8585|M|443-55-3322|DIANA|F|PARMENTER|551 COLUMBUS AVE.|WASHINGTON|DC|20005|(202) 655-9433|F|044-88-9019|RICHARD|L|VIERRA|24 EAST HURLEY ST.|CAMBRIDGE|MA|02139|(617) 661-8989|M|344-89-3218|LYNNE|A|HARLOW|101 N. WASHINGTON ST.|MANSFIELD|MA|02430|(508) 877-5086|F|040-11-8453|JACK|M|CUMMINS|12 EASTSIDE DR.|BLOOMINGTON|IN|47401|(812) 339-2339|M|566-38-3839|HENRY|C|COSTELLO|180 E. 10TH ST.|NEW YORK|NY|10003|(212) 506-1319|M|566-28-8549|DENISE|L|BAUTARA|1801 OCEANSIDE DR.|FT. LAUDERDALE|FL|34033|(706) 323-1157|F|030-57-7739|DEREK|M|RUTHERFORD|623 AUSTIN ST.|COLLEGE STATION|TX|70894|(818) 321-8850|M|784-3";
        try { 
          Map<String, String> context = new HashMap<String, String>();
          context.put("http.url", "https://webtest.skillcheck.com/legacy/legacy?ScorePost2");
          context.put("http.headers",
                "Content-Type=application/x-www-form-urlencoded");
          context.put("http.method", "POST");

          // build the request body
          StringBuilder req = new StringBuilder();
          req.append("sourceData=").append( URLEncoder.encode( sourceText, "UTF-8" ) ).append( "&userData=" );
          req.append( URLEncoder.encode( userText, "UTF-8" ) );
          context.put( "http.template", req.toString() );
          Gateway gateway = new HttpGatewayImpl();
          GatewayContext gatewayContext = new GatewayContext( context );
          /*GatewayResult result = gateway.send( gatewayContext );
          System.out.println( result.toString() );
          byte [] bytes = result.getRawResponse().getBytes();
          System.out.println( "Byte array len: " + bytes.length );
*/
          postToLegacy( sourceText, userText, "-99" );
        } catch( Exception e ) {
          System.out.println( "Exception!! " + e.toString() );
        }
  }

  private static String postToLegacy(String pSourceData, String pUserData, String pScoreKey) {

        StringBuffer theScoreData = new StringBuffer();
        StringBuffer postReq = new StringBuffer();
        //String url = "https://webtest.skillcheck.com/legacy/legacy?ScorePost2";
        String url = "https://gamma.skillcheck.com/legacy/legacy?ScorePost2";
        // http://192.168.2.150:7100/Legacy/legacy?ScorePost2

        System.out.println("attempting post to..." + url);
        BufferedWriter out = null;
        BufferedReader in = null;
        OutputStream theOutStream=null;
        InputStream theInStream=null;
        InputStreamReader iStreamReader = null;
        OutputStreamWriter iStreamWriter = null;

        try {
            URL u=null;
            HttpURLConnection conn=null;

            postReq.append("sourceData=" + URLEncoder.encode(pSourceData,"UTF-8"));
            postReq.append("&userData=" + URLEncoder.encode(pUserData,"UTF-8"));
            postReq.append("&scoreKey=" + URLEncoder.encode(pScoreKey,"UTF-8"));

            u=new URL(url);
            conn=(HttpURLConnection) u.openConnection();
            conn.setRequestMethod("POST");
            conn.setRequestProperty("Content-Type","application/x-www-form-urlencoded");
            conn.setDoOutput(true);
            conn.setDoInput(true);

            theOutStream=conn.getOutputStream();
            iStreamWriter = new OutputStreamWriter(theOutStream);
            out = new BufferedWriter(iStreamWriter);
            out.write(postReq.toString());
            out.flush();
            out.close();

            int rc = conn.getResponseCode();
            String rval = conn.getResponseMessage();
            theInStream = conn.getInputStream();
            iStreamReader = new InputStreamReader(theInStream);
            in = new BufferedReader(iStreamReader);
            System.out.println("legacy read attempt");

            String str;
            while( (str = in.readLine()) != null ) {
                theScoreData.append(str);
            }

            System.out.println("rc: " + rc);
            System.out.println("rval: " + rval);
            System.out.println("content: " + theScoreData.toString());
        }
        catch( Exception e ) {
            System.out.println(e.getMessage());
            return "ERROR";
        }
        finally {
            try {
                out.close();
            }
            catch( Exception e ) {
                System.out.println(e.getMessage());
            }
            try {
                in.close();
            }
            catch( Exception e ) {
                System.out.println(e.getMessage());
            }
            try {
                iStreamReader.close();
            }
            catch( Exception e ) {
                System.out.println(e.getMessage());
            }
            try {
                iStreamWriter.close();
            }
            catch( Exception e ) {
                System.out.println(e.getMessage());
            }
            try {
                theOutStream.close();
            }
            catch( Exception e ) {
                System.out.println(e.getMessage());
            }
            try {
                theInStream.close();
            }
            catch( Exception e ) {
                System.out.println(e.getMessage());
            }
        }

        return theScoreData.toString();

    }
}
